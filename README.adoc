// This README is in AsciiDoc format, but the plugin description block below is HTML.
// The Gradle build extracts the HTML between the markers and injects it into plugin.xml.
++++
<!-- DESC_BEGIN -->
<h2>Demo Agenda<h2>

<h3>Toggle Incomplete/Completed items for a Demo</h3>
<p>
  Agenda adds a small yellow gutter icon in <code>Agenda.txt</code> for lines that start with
  an incomplete item (defaults to blue circle <code>ðŸ”µ</code>) or a completed item (defaults to check mark <code>âœ…</code>). Click the icon to toggle the emoji
  between these two markers. This makes it quick to mark items as done or revert them back to pending.
<p>

<h3>Features</h3>
<ul>
  <li>Default values used if no configuration is set.</li>
  <li>Settings location: <code>Settings | Tools | Demo Agenda</code> (per project).</li>
  <li>Detects lines in <code>Agenda.txt</code> beginning with <code>ðŸ”µ</code> or <code>âœ…</code>.</li>
  <li>Shows a yellow gutter toggle icon next to matching lines.</li>
  <li>One-click or key combination toggle between incomplete (<code>ðŸ”µ</code>) and completed (<code>âœ…</code>).</li>
  <li>Lightweight and works with plain text.</li>
  <li>Keymap: <code>Settings | Keymap</code> â†’ search for <code>Toggle Agenda Item</code></li>
  <li> Default keyboard shortcuts:
    <ul>
      <li>Windows: <code><strong>Ctrl+Alt+Down</strong></code>.</li>
      <li>macOS: <code><strong>Cmd+Opt+Down</strong></code>.</li>
    </ul>
  </li>
</ul>

<h3>How to use</h3>
<ol>
  <li>Create or open a file named <code>Agenda.txt</code> in your project.</li>
  <li>Start task lines with <code>ðŸ”µ</code> for pending or <code>âœ…</code> for done, for example:<br/>
    <code>ðŸ”µ Draft release notes</code></li>
  <li>Operation:
      <ul>
        <li>Mouse: Click the gutter icon to toggle the state.</li>
        <li>Keyboard: Use the key combination</li>
      </ul>
  </li>
  <li>May require the file to be closed and re-opened after any new content is added.</li>
</ol>

<h3>Requirements</h3>
<ul>
  <li>Runs on IntelliJ Platform IDEs compatible with the pluginâ€™s declared since-build. (2024.3+)</li>
</ul>

<h3>Permissions</h3>
<p>No special permissions. Operates only on the currently opened text file.</p>

<!-- DESC_END -->
++++

== Project structure

[source]
----
agenda/
â”œâ”€ README.adoc                     # This file; description is injected into plugin.xml
â”œâ”€ build.gradle.kts                # IntelliJ Platform Gradle Plugin build
â”œâ”€ settings.gradle.kts
â”œâ”€ gradle.properties               # Version and plugin display name
â”œâ”€ gradle/                         # Gradle wrapper files
â”œâ”€ IDE/
â”‚  â”œâ”€ BuildPlugin.run.xml          # Run configuration: build distributable plugin ZIP
â”‚  â””â”€ RunIDE.run.xml               # Run configuration: launch IDE sandbox with the plugin
â”œâ”€ Agenda.txt                      # Sample agenda file for quick testing
â””â”€ src/
   â”œâ”€ main/java/none/cgutils/agenda/
   â”‚  â”œâ”€ AgendaKeyAction.java              # Keyboard action to toggle items
   â”‚  â”œâ”€ AgendaLineMarkerProvider.java     # Gutter icon provider
   â”‚  â”œâ”€ AgendaToggleLogic.java            # Toggle implementation
   â”‚  â””â”€ settings/
   â”‚     â”œâ”€ AgendaProjectSettings.java
   â”‚     â””â”€ AgendaProjectSettingsConfigurable.java
   â””â”€ main/resources/META-INF/
      â”œâ”€ plugin.xml                # Plugin metadata; description injected from README
      â””â”€ pluginIcon.svg
----

== Prerequisites

- JDK 21 (project and Kotlin target 21)
- Gradle Wrapper (use `./gradlew` or `gradlew.bat`; no local Gradle installation required)
- IntelliJ IDEA 2024.3+ recommended; plugin targets since-build `251` (2025.1)
- Internet access for Gradle to fetch IntelliJ Platform artifacts

== Setup

1. Clone the repository.
2. Open the project in IntelliJ IDEA (Open as Gradle project).
3. Set Project SDK to JDK 21: File > Project Structure > SDKs.
4. Let Gradle sync. The IntelliJ Platform Gradle Plugin (`org.jetbrains.intellij.platform` 2.7.1) will configure tasks.

== Build, run

- Build: `./gradlew build`
- Run IDE sandbox with the plugin: `./gradlew runIde`
- Build distributable plugin ZIP: `./gradlew buildPlugin` (output: `build/distributions/*.zip`)

== Installation (from ZIP)

To install the plugin from a distributable ZIP:

1. Open IntelliJ IDEA.
2. Go to `Settings`.
3. Select `Plugins`.
4. Click the gear icon (top right) and choose `Install Plugin from Diskâ€¦`.
5. Navigate to the `build/distributions/` directory and select the generated ZIP file.
6. Restart the IDE if prompted.

== Using the IDE run configurations (IDE/*.run.xml)

This repo includes ready-to-use IntelliJ run configurations under `IDE/`:

- `RunIDE.run.xml` â€” launches an IntelliJ sandbox with this plugin enabled.
- `BuildPlugin.run.xml` â€” builds the distributable plugin ZIP.

Two ways to use them:

1) Import manually
   - IntelliJ IDEA: Run > Edit Configurationsâ€¦ > gear icon > Import Configurationâ€¦
   - Select the `.run.xml` file from the `IDE/` directory.

2) Copy into the projectâ€™s run configuration folder
   - Create a `.run/` directory at the project root (if missing).
   - Copy the desired `*.run.xml` files from `IDE/` into `.run/`.
   - IntelliJ will pick them up automatically under Run/Debug Configurations.

After importing, use the Run/Debug toolbar to select and run the configuration.

== First run checklist

- Open or create an `Agenda.txt` file in your project root.
- If the gutter icon does not appear immediately on newly added lines, close and re-open the file.
- The keyboard action is available as `Toggle Agenda Item` (bind under Settings | Keymap).

== Troubleshooting

- Gradle cannot resolve IntelliJ Platform: ensure you are online and configure proxies if needed.
- Build fails due to JDK: verify JDK 21 is configured for both Project SDK and Gradle JVM.
- Sandbox IDE starts without the plugin: run via the provided run configuration or `./gradlew runIde`.
